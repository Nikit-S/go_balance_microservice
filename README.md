# Микросервис обработки транзакций

## Сборка
Используй команду ```make``` в корне проекта
Пример:
```/your/folder/micro$ make```
Проект соберется и запустится сам

## Использование
Сервис слушает на 9090 порту

## Структура данных
Для запросов ```balance``` и ```balancelog``` необходимо только поле ```user_id``` — id пользователя (не id баланса)
Для запросов ```transaction``` могут требоваться данные поля:
```user_id``` — id пользователя (не id баланса) обязательное поле
```from``` — источник транзакции (в случае если транзакция является переводом от с одного баланса на другой необхожимо заполнить текстом ```balance```, во всех остальных случаях является необязательным
```from_id``` — user_id пользователя-отправителя / id иного источника (обязательное поле для перевода и необязательное для остальных случаев) 
```amount``` — размер транзакции формата ```decimal(15, 2)``` (знак не играет роли при переводе)
```comment``` — комментарий
### balance
#### get
```curl localhost:9090/balance/ -XGET -d '{"user_id":1}'```  — возвращает запись о балансе с user_id=1
### transaction
#### get
```curl localhost:9090/transaction/-XGET -d '{"id":1}``` — возвращает запись о транзакции с id=1
#### post
Используется для начисления, списания и переводов
```curl localhost:9090/transaction/ -XPOST -d '{"user_id": 11, "from":"balance", "from_id": 12, "amount": -2000.1234, "comment":"eat this"}'``` — транзакция в рамках которой будет произведен перевод в размере 2000.12 от пользователя с id=12 пользователю с id=11, с соответствующим комментарием
В случае отсутствия баланса, при начислении создается баланс
#### возвращаемые значения
в случае успеха возвращает запись о транзакции в виде объекта json, где значение ```status``` отвечает за успех или неуспех поданной заявки на проведение транзакции
### balancelog
```curl localhost:9090/balancelog/1``` — возвращает запись о балансе с user_id=1 (НЕ id) в виде объекта json
